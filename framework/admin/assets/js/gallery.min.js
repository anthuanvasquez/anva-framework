jQuery(document).ready(function(e){"use strict";var t,a,i={settings:{thumbUl:e("#anva_gallery_thumbs"),thumbLi:e("#anva_gallery_thumbs li")},init:function(){a=this.settings,i.sortableImage(),i.uploadImage(),i.removeThubmanil(),i.removeAllThumbnail(),i.emptyGallery()},sortableImage:function(){a.thumbUl.length>0&&a.thumbUl.sortable({placeholder:"anva-gallery-placeholder",start:function(e,t){t.placeholder.height(t.item.height()-2),t.placeholder.width(t.item.width()-2)}})},uploadImage:function(){e("#anva_gallery_upload_button").on("click",function(a){return a.preventDefault(),t?void t.open():(t=wp.media.frames.frame=wp.media({title:e(this).data("title"),button:{text:e(this).data("text")},library:{type:"image"},multiple:!0}),t.on("select",function(){for(var e=t.state().get("selection").toJSON(),a=e.length,s=0;a>s;s++)i.getThumbnail(e[s].id)}),void t.open())})},removeThubmanil:function(){a.thumbUl.on("click",".anva_gallery_remove",function(t){t.preventDefault(),e(this).parent().fadeOut(100,function(){e(this).remove()}),setTimeout(function(){i.emptyGallery()},500)})},removeAllThumbnail:function(){e("#anva_gallery_remove_all_buttons").on("click",function(t){return t.preventDefault(),0===e("#anva_gallery_thumbs li").length?void alert(anvaJs.gallery_empty):(confirm(anvaJs.gallery_confirm)&&a.thumbUl.empty(),void i.emptyGallery())})},getThumbnail:function(t,s){s=s||function(){};var n={action:"anva_gallery_get_thumbnail",imageid:t};e("#anva-gallery-spinner").css("visibility","visible"),e.post(ajaxurl,n,function(e){a.thumbUl.append(e),s()}).done(function(){e("#anva-gallery-spinner").css("visibility","hidden"),i.emptyGallery()})},emptyGallery:function(){0===e("#anva_gallery_thumbs li").length?a.thumbUl.addClass("empty"):a.thumbUl.removeClass("empty")}};i.init()});
