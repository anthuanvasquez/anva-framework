jQuery(document).ready(function(o){"use strict";var t,e,c={settings:{thumbUl:o("#anva_gallery_thumbs"),thumbLi:o("#anva_gallery_thumbs li")},init:function(){e=this.settings,c.sortableImage(),c.uploadImage(),c.removeThubmanil(),c.removeAllThumbnail(),c.emptyGallery()},sortableImage:function(){e.thumbUl.length>0&&e.thumbUl.sortable({placeholder:"anva-gallery-placeholder",start:function(o,t){t.placeholder.height(t.item.height()-2),t.placeholder.width(t.item.width()-2)}})},uploadImage:function(){o("#anva_gallery_upload_button").on("click",function(e){return e.preventDefault(),t?void t.open():(t=wp.media.frames.frame=wp.media({title:o(this).data("title"),button:{text:o(this).data("text")},library:{type:"image"},multiple:!0}),t.on("select",function(){for(var o=t.state().get("selection").toJSON(),e=o.length,n=0;e>n;n++)c.getThumbnail(o[n].id)}),void t.open())})},removeThubmanil:function(){e.thumbUl.on("click",".anva_gallery_remove",function(t){t.preventDefault(),o(this).parent().fadeOut(100,function(){o(this).remove()}),setTimeout(function(){c.emptyGallery()},500)})},removeAllThumbnail:function(){o("#anva_gallery_remove_all_buttons").on("click",function(t){return t.preventDefault(),0==o("#anva_gallery_thumbs li").length?void alert(anvaJs.gallery_empty):(confirm(anvaJs.gallery_confirm)&&e.thumbUl.empty(),void c.emptyGallery())})},getThumbnail:function(t,n){n=n||function(){};var i={action:"anva_gallery_get_thumbnail",imageid:t};o("#anva-gallery-spinner").css("visibility","visible"),o.post(ajaxurl,i,function(o){e.thumbUl.append(o),n()}).done(function(){o("#anva-gallery-spinner").css("visibility","hidden"),c.emptyGallery()})},emptyGallery:function(){0==o("#anva_gallery_thumbs li").length?e.thumbUl.addClass("empty"):e.thumbUl.removeClass("empty")}};c.init()});
